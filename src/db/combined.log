{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-08T18:50:11.210Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-08T18:50:12.024Z"}
{"level":"info","message":{"duration":816,"params":[],"query":"-- Add password column if not exists\r\nALTER TABLE users ADD COLUMN IF NOT EXISTS password VARCHAR(255)","rowCount":0},"timestamp":"2025-03-08T18:50:12.056Z"}
{"level":"info","message":"Executed SQL statement successfully","timestamp":"2025-03-08T18:50:12.057Z"}
{"level":"error","message":{"error":"unterminated dollar-quoted string at or near \"$$ \r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns \r\n                  WHERE table_name = 'users' AND column_name = 'is_admin') THEN\r\n        ALTER TABLE users ADD COLUMN is_admin BOOLEAN DEFAULT FALSE\"","params":[],"query":"-- Add is_admin column if it doesn't exist\r\nDO $$ \r\nBEGIN\r\n    IF NOT EXISTS (SELECT 1 FROM information_schema.columns \r\n                  WHERE table_name = 'users' AND column_name = 'is_admin') THEN\r\n        ALTER TABLE users ADD COLUMN is_admin BOOLEAN DEFAULT FALSE"},"timestamp":"2025-03-08T18:50:12.291Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-08T18:50:54.745Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-08T18:50:55.559Z"}
{"level":"info","message":{"duration":805,"params":[],"query":"-- Add required columns if they don't exist\r\nALTER TABLE users ADD COLUMN IF NOT EXISTS password VARCHAR(255)","rowCount":0},"timestamp":"2025-03-08T18:50:55.580Z"}
{"level":"info","message":"Executed SQL statement successfully","timestamp":"2025-03-08T18:50:55.581Z"}
{"level":"info","message":{"duration":235,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS is_admin BOOLEAN DEFAULT FALSE","rowCount":0},"timestamp":"2025-03-08T18:50:55.816Z"}
{"level":"info","message":"Executed SQL statement successfully","timestamp":"2025-03-08T18:50:55.817Z"}
{"level":"info","message":{"duration":256,"params":[],"query":"-- Create or update admin user\r\nINSERT INTO users (email, name, is_admin) \r\nVALUES ('admin@mesem.com', 'Admin User', true)\r\nON CONFLICT (email) \r\nDO UPDATE SET is_admin = true, name = 'Admin User'\r\nWHERE users.email = 'admin@mesem.com'","rowCount":0},"timestamp":"2025-03-08T18:50:56.073Z"}
{"level":"info","message":"Executed SQL statement successfully","timestamp":"2025-03-08T18:50:56.074Z"}
{"level":"info","message":{"duration":237,"params":[],"query":"SELECT id, email, is_admin FROM users WHERE email = 'admin@mesem.com'","rowCount":1},"timestamp":"2025-03-08T18:50:56.311Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-08T19:33:15.324Z"}
{"level":"info","message":{"duration":2389,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-08T19:33:17.745Z"}
{"level":"info","message":{"duration":271,"params":[],"query":"SELECT name FROM migrations ORDER BY id ASC","rowCount":2},"timestamp":"2025-03-08T19:33:18.016Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-08T21:28:24.173Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-08T21:28:25.006Z"}
{"level":"info","message":{"duration":1723,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-08T21:28:25.927Z"}
{"level":"info","message":{"duration":233,"params":[],"query":"SELECT name FROM migrations ORDER BY id ASC","rowCount":6},"timestamp":"2025-03-08T21:28:26.162Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-08T21:30:43.183Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-08T21:30:43.973Z"}
{"level":"info","message":{"duration":761,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-08T21:30:43.976Z"}
{"level":"info","message":{"duration":229,"params":[],"query":"SELECT name FROM migrations ORDER BY id ASC","rowCount":6},"timestamp":"2025-03-08T21:30:44.206Z"}
{"level":"info","message":"Skipping already executed migration: 20240308_add_user_fields.sql","timestamp":"2025-03-08T21:30:44.213Z"}
{"level":"info","message":{"duration":351,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_code VARCHAR(6)","rowCount":0},"timestamp":"2025-03-08T21:30:44.568Z"}
{"level":"info","message":{"duration":228,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_code_expires_at TIMESTAMP","rowCount":0},"timestamp":"2025-03-08T21:30:44.797Z"}
{"level":"info","message":{"duration":230,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS is_verified BOOLEAN DEFAULT FALSE","rowCount":0},"timestamp":"2025-03-08T21:30:45.029Z"}
{"level":"info","message":{"duration":484,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_attempts INT DEFAULT 0","rowCount":0},"timestamp":"2025-03-08T21:30:45.515Z"}
{"level":"info","message":{"duration":344,"params":["20240308_add_verification_fields.sql"],"query":"INSERT INTO migrations (name) VALUES ($1)","rowCount":0},"timestamp":"2025-03-08T21:30:45.860Z"}
{"level":"info","message":"Successfully executed migration: 20240308_add_verification_fields.sql","timestamp":"2025-03-08T21:30:45.861Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120001_create_users_table.sql","timestamp":"2025-03-08T21:30:45.862Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120002_create_transactions_table.sql","timestamp":"2025-03-08T21:30:45.863Z"}
{"level":"info","message":"Skipping already executed migration: 20250307_initial_schema.sql","timestamp":"2025-03-08T21:30:45.864Z"}
{"level":"info","message":"Skipping already executed migration: 20250308_add_user_fields.sql","timestamp":"2025-03-08T21:30:45.865Z"}
{"level":"info","message":"Skipping already executed migration: 20250309_add_user_registration_fields.sql","timestamp":"2025-03-08T21:30:45.866Z"}
{"level":"info","message":{"duration":229,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_code VARCHAR(6)","rowCount":0},"timestamp":"2025-03-08T21:30:46.097Z"}
{"level":"info","message":{"duration":227,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_code_expires_at TIMESTAMP","rowCount":0},"timestamp":"2025-03-08T21:30:46.325Z"}
{"level":"info","message":{"duration":771,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS is_verified BOOLEAN DEFAULT FALSE","rowCount":0},"timestamp":"2025-03-08T21:30:47.098Z"}
{"level":"info","message":{"duration":229,"params":[],"query":"ALTER TABLE users ADD COLUMN IF NOT EXISTS verification_attempts INT DEFAULT 0","rowCount":0},"timestamp":"2025-03-08T21:30:47.328Z"}
{"level":"info","message":{"duration":227,"params":["[timestamp]_add_verification_fields.sql"],"query":"INSERT INTO migrations (name) VALUES ($1)","rowCount":0},"timestamp":"2025-03-08T21:30:47.555Z"}
{"level":"info","message":"Successfully executed migration: [timestamp]_add_verification_fields.sql","timestamp":"2025-03-08T21:30:47.556Z"}
{"level":"error","message":{"error":"relation \"transactions\" already exists","params":[],"query":"CREATE TABLE transactions (\r\n    id SERIAL PRIMARY KEY,\r\n    transaction_id VARCHAR(255) NOT NULL,\r\n    user_id INTEGER REFERENCES users(id),\r\n    amount DECIMAL(10,2) NOT NULL,\r\n    status VARCHAR(50) NOT NULL,\r\n    phonepe_transaction_id VARCHAR(255),\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n)"},"timestamp":"2025-03-08T21:30:48.031Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T12:41:05.474Z"}
{"level":"info","message":{"duration":2190,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-10T12:41:07.695Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T12:41:07.845Z"}
{"level":"info","message":{"duration":932,"params":[],"query":"SELECT name FROM migrations ORDER BY id ASC","rowCount":8},"timestamp":"2025-03-10T12:41:08.628Z"}
{"level":"info","message":"Skipping already executed migration: 20240308_add_user_fields.sql","timestamp":"2025-03-10T12:41:08.633Z"}
{"level":"info","message":"Skipping already executed migration: 20240308_add_verification_fields.sql","timestamp":"2025-03-10T12:41:08.634Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120001_create_users_table.sql","timestamp":"2025-03-10T12:41:08.635Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120002_create_transactions_table.sql","timestamp":"2025-03-10T12:41:08.636Z"}
{"level":"info","message":"Skipping already executed migration: 20250307_initial_schema.sql","timestamp":"2025-03-10T12:41:08.636Z"}
{"level":"info","message":"Skipping already executed migration: 20250308_add_user_fields.sql","timestamp":"2025-03-10T12:41:08.637Z"}
{"level":"info","message":"Skipping already executed migration: 20250309_add_user_registration_fields.sql","timestamp":"2025-03-10T12:41:08.638Z"}
{"level":"warn","message":"Empty up migration in file: 20250310_update_registration_schema.sql","timestamp":"2025-03-10T12:41:08.639Z"}
{"level":"info","message":"Skipping already executed migration: [timestamp]_add_verification_fields.sql","timestamp":"2025-03-10T12:41:08.640Z"}
{"level":"error","message":{"error":"relation \"transactions\" already exists","params":[],"query":"CREATE TABLE transactions (\r\n    id SERIAL PRIMARY KEY,\r\n    transaction_id VARCHAR(255) NOT NULL,\r\n    user_id INTEGER REFERENCES users(id),\r\n    amount DECIMAL(10,2) NOT NULL,\r\n    status VARCHAR(50) NOT NULL,\r\n    phonepe_transaction_id VARCHAR(255),\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n)"},"timestamp":"2025-03-10T12:41:08.987Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T12:42:58.313Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T12:42:59.262Z"}
{"level":"info","message":{"duration":929,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        name VARCHAR(255) NOT NULL,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-10T12:42:59.273Z"}
{"level":"info","message":{"duration":271,"params":[],"query":"SELECT name FROM migrations ORDER BY id ASC","rowCount":8},"timestamp":"2025-03-10T12:42:59.545Z"}
{"level":"info","message":"Skipping already executed migration: 20240308_add_user_fields.sql","timestamp":"2025-03-10T12:42:59.552Z"}
{"level":"info","message":"Skipping already executed migration: 20240308_add_verification_fields.sql","timestamp":"2025-03-10T12:42:59.554Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120001_create_users_table.sql","timestamp":"2025-03-10T12:42:59.555Z"}
{"level":"info","message":"Skipping already executed migration: 20250307120002_create_transactions_table.sql","timestamp":"2025-03-10T12:42:59.556Z"}
{"level":"info","message":"Skipping already executed migration: 20250307_initial_schema.sql","timestamp":"2025-03-10T12:42:59.557Z"}
{"level":"info","message":"Skipping already executed migration: 20250308_add_user_fields.sql","timestamp":"2025-03-10T12:42:59.558Z"}
{"level":"info","message":"Skipping already executed migration: 20250309_add_user_registration_fields.sql","timestamp":"2025-03-10T12:42:59.559Z"}
{"level":"info","message":{"duration":301,"params":[],"query":"-- Create enum types\r\nCREATE TYPE event_name_enum AS ENUM (\r\n    'Solo Singing',\r\n    'Face Painting',\r\n    'Eastern Dance Solo',\r\n    'Beatboxing Battle',\r\n    'Debate',\r\n    'The Talent Show',\r\n    'Short Film',\r\n    'Creative Group Dance',\r\n    'Quiz',\r\n    'Street Dance Battle',\r\n    'Fashion Show'\r\n)","rowCount":0},"timestamp":"2025-03-10T12:42:59.862Z"}
{"level":"info","message":{"duration":246,"params":[],"query":"CREATE TYPE event_day_enum AS ENUM ('day 1', 'day 2')","rowCount":0},"timestamp":"2025-03-10T12:43:00.110Z"}
{"level":"info","message":{"duration":263,"params":[],"query":"CREATE TYPE event_time_enum AS ENUM ('first half', 'second half')","rowCount":0},"timestamp":"2025-03-10T12:43:00.375Z"}
{"level":"info","message":{"duration":247,"params":[],"query":"CREATE TYPE payment_status_enum AS ENUM ('pending', 'completed', 'failed')","rowCount":0},"timestamp":"2025-03-10T12:43:00.624Z"}
{"level":"info","message":{"duration":269,"params":[],"query":"-- Drop existing columns and constraints if any\r\nALTER TABLE users\r\nDROP COLUMN IF EXISTS event_title,\r\nDROP COLUMN IF EXISTS participant_names","rowCount":0},"timestamp":"2025-03-10T12:43:00.895Z"}
{"level":"error","message":{"error":"column \"email\" of relation \"users\" already exists","params":[],"query":"-- Add new columns and modify existing ones\r\nALTER TABLE users\r\nADD COLUMN event_name event_name_enum,\r\nADD COLUMN event_code VARCHAR(50),\r\nADD COLUMN event_day event_day_enum,\r\nADD COLUMN event_time event_time_enum,\r\nADD COLUMN event_location VARCHAR(255),\r\nADD COLUMN participant_names TEXT[],\r\nADD COLUMN team_lead_name VARCHAR(255),\r\nADD COLUMN email VARCHAR(255) NOT NULL,\r\nADD COLUMN whatsapp_number VARCHAR(20) NOT NULL,\r\nADD COLUMN alternate_phone VARCHAR(20),\r\nADD COLUMN college VARCHAR(255) NOT NULL,\r\nADD COLUMN registration_timestamp TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\r\nADD COLUMN entry_fee DECIMAL(10,2),\r\nADD COLUMN payment_status payment_status_enum DEFAULT 'pending',\r\nADD COLUMN payment_screenshot_url TEXT,\r\nADD COLUMN upi_transaction_id VARCHAR(255),\r\nADD COLUMN coordinator_approved BOOLEAN DEFAULT FALSE,\r\nADD COLUMN coordinator_notes TEXT"},"timestamp":"2025-03-10T12:43:01.134Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T12:49:41.836Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T12:49:42.757Z"}
{"level":"error","message":{"error":"column \"team_name\" of relation \"registrations\" does not exist","params":[],"query":"INSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    team_name,\r\n    participant_names,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    -- Solo Participant (Solo Singing)\r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        NULL,\r\n        ARRAY['Rahul Kumar'],\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'completed',\r\n        'approved'\r\n    ),\r\n\r\n    -- Team Event (Face Painting - 2 members)\r\n    (\r\n        'Face Painting',\r\n        'SHADE SHIFTERS',\r\n        'day 1',\r\n        'first half',\r\n        'Class Room',\r\n        2,\r\n        'Creative Duo',\r\n        ARRAY['Priya Singh', 'Amit Shah'],\r\n        'Priya Singh',\r\n        'priya@example.com',\r\n        '9876543212',\r\n        '9876543213',\r\n        'Design Institute of Technology',\r\n        80.00,\r\n        'pending',\r\n        'pending'\r\n    ),\r\n\r\n    -- Large Team (Fashion Show - 8 members)\r\n    (\r\n        'Fashion Show',\r\n        'VOGUE VORTEX',\r\n        'day 2',\r\n        'second half',\r\n        'Boys Common Room',\r\n        8,\r\n        'Style Squad',\r\n        ARRAY['Maya Patel', 'Rohan Gupta', 'Neha Sharma', 'Arjun Reddy', 'Zara Khan', 'Dev Kapoor', 'Riya Jain', 'Aditya Verma'],\r\n        'Maya Patel',\r\n        'maya@example.com',\r\n        '9876543214',\r\n        '9876543215',\r\n        'Fashion & Arts College',\r\n        300.00,\r\n        'completed',\r\n        'approved'\r\n    ),\r\n\r\n    -- Medium Team (Short Film - 5 members)\r\n    (\r\n        'Short Film',\r\n        'ABSOLUTE CINEMA',\r\n        'day 1',\r\n        'second half',\r\n        'APC Hall',\r\n        5,\r\n        'Reel Masters',\r\n        ARRAY['Vikram Seth', 'Ananya Das', 'Kabir Singh', 'Meera Roy', 'Raj Malhotra'],\r\n        'Vikram Seth',\r\n        'vikram@example.com',\r\n        '9876543216',\r\n        '9876543217',\r\n        'Media Institute',\r\n        250.00,\r\n        'completed',\r\n        'rejected'\r\n    ),\r\n\r\n    -- Small Team (Debate - 2 members)\r\n    (\r\n        'Debate',\r\n        'CLASH OF \"GYANIS\"',\r\n        'day 1',\r\n        'second half',\r\n        'Language Lab',\r\n        2,\r\n        'Logic Warriors',\r\n        ARRAY['Shreya Mehta', 'Aryan Kapoor'],\r\n        'Shreya Mehta',\r\n        'shreya@example.com',\r\n        '9876543218',\r\n        '9876543219',\r\n        'Liberal Arts College',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )"},"timestamp":"2025-03-10T12:49:42.771Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:18:27.412Z"}
{"level":"error","message":{"error":"column \"is_team\" of relation \"registrations\" does not exist","params":[],"query":"-- First insert registrations\r\nINSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    is_team,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    -- Solo Participant (Solo Singing)\r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        false,\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )"},"timestamp":"2025-03-10T13:18:28.222Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:18:50.092Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T13:18:50.909Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:19:38.954Z"}
{"level":"error","message":{"error":"relation \"registrations\" does not exist","params":[],"query":"-- First insert registrations\r\nINSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    is_team,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    -- Solo Participant (Solo Singing)\r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        false,\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )"},"timestamp":"2025-03-10T13:19:39.769Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:20:14.155Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T13:20:15.008Z"}
{"level":"error","message":{"error":"duplicate key value violates unique constraint \"users_pkey\"","params":[],"query":"INSERT INTO users (\r\n    name,\r\n    email,\r\n    event_title,\r\n    participant_names,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    department,\r\n    year_of_study,\r\n    payment_status,\r\n    payment_amount,\r\n    payment_date,\r\n    transaction_id,\r\n    payment_method,\r\n    registration_type,\r\n    is_verified\r\n) VALUES \r\n    (\r\n        'John Doe',\r\n        'john@example.com',\r\n        'Robotics Workshop',\r\n        ARRAY['John Doe', 'Jane Smith'],\r\n        '9876543210',\r\n        '9876543211',\r\n        'MIT College',\r\n        'Computer Science',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        1500.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '2 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Alice Johnson',\r\n        'alice@example.com',\r\n        'AI Workshop',\r\n        ARRAY['Alice Johnson'],\r\n        '9876543212',\r\n        '9876543213',\r\n        'Stanford Tech',\r\n        'Artificial Intelligence',\r\n        'Final Year',\r\n        'PENDING',\r\n        2000.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'Bob Wilson',\r\n        'bob@example.com',\r\n        'Hackathon 2024',\r\n        ARRAY['Bob Wilson', 'Carol White', 'David Brown'],\r\n        '9876543214',\r\n        '9876543215',\r\n        'Tech Institute',\r\n        'Information Technology',\r\n        'Second Year',\r\n        'COMPLETED',\r\n        3000.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '1 day',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'Card',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Emma Davis',\r\n        'emma@example.com',\r\n        'Web Development',\r\n        ARRAY['Emma Davis'],\r\n        '9876543216',\r\n        '9876543217',\r\n        'Digital University',\r\n        'Web Technologies',\r\n        'First Year',\r\n        'FAILED',\r\n        1000.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '3 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'Michael Chen',\r\n        'michael@example.com',\r\n        'IoT Workshop',\r\n        ARRAY['Michael Chen', 'Sarah Lee'],\r\n        '9876543218',\r\n        '9876543219',\r\n        'IoT Institute',\r\n        'Electronics',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        2500.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '4 hours',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'NetBanking',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Sarah Williams',\r\n        'sarah@example.com',\r\n        'Blockchain Basics',\r\n        ARRAY['Sarah Williams'],\r\n        '9876543220',\r\n        '9876543221',\r\n        'Crypto College',\r\n        'Blockchain',\r\n        'Final Year',\r\n        'PENDING',\r\n        1800.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'James Brown',\r\n        'james@example.com',\r\n        'Machine Learning',\r\n        ARRAY['James Brown', 'Emily White'],\r\n        '9876543222',\r\n        '9876543223',\r\n        'AI Institute',\r\n        'Data Science',\r\n        'Second Year',\r\n        'COMPLETED',\r\n        2200.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '1 hour',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Lisa Anderson',\r\n        'lisa@example.com',\r\n        'Cloud Computing',\r\n        ARRAY['Lisa Anderson'],\r\n        '9876543224',\r\n        '9876543225',\r\n        'Cloud Tech',\r\n        'Cloud Architecture',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        1700.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '2 hours',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'Card',\r\n        'INDIVIDUAL',\r\n        true\r\n    ),\r\n    (\r\n        'Tom Miller',\r\n        'tom@example.com',\r\n        'Cybersecurity',\r\n        ARRAY['Tom Miller', 'Alex Johnson'],\r\n        '9876543226',\r\n        '9876543227',\r\n        'Security Institute',\r\n        'Information Security',\r\n        'Final Year',\r\n        'FAILED',\r\n        2800.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '5 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'NetBanking',\r\n        'TEAM',\r\n        false\r\n    ),\r\n    (\r\n        'Anna Martinez',\r\n        'anna@example.com',\r\n        'Mobile App Development',\r\n        ARRAY['Anna Martinez'],\r\n        '9876543228',\r\n        '9876543229',\r\n        'App Academy',\r\n        'Mobile Computing',\r\n        'Second Year',\r\n        'PENDING',\r\n        1900.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    )\r\nON CONFLICT (email) DO NOTHING"},"timestamp":"2025-03-10T13:20:15.026Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:21:56.063Z"}
{"level":"error","message":{"error":"column \"is_team\" of relation \"registrations\" does not exist","params":[],"query":"-- First insert registrations\r\nINSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    is_team,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    -- Solo Participant (Solo Singing)\r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        false,\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )"},"timestamp":"2025-03-10T13:21:56.883Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:22:57.197Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-10T13:22:58.009Z"}
{"level":"error","message":{"error":"column \"is_team\" of relation \"registrations\" does not exist","params":[],"query":"-- First insert registrations\r\nINSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    is_team,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    -- Solo Participant (Solo Singing)\r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        false,\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )"},"timestamp":"2025-03-10T13:22:58.013Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-10T13:23:38.379Z"}
{"level":"info","message":{"duration":809,"params":[],"query":"-- First clean up existing data\r\nTRUNCATE registrations CASCADE","rowCount":0},"timestamp":"2025-03-10T13:23:39.217Z"}
{"level":"info","message":{"duration":860,"params":[],"query":"TRUNCATE users CASCADE","rowCount":0},"timestamp":"2025-03-10T13:23:39.267Z"}
{"level":"info","message":"Test user not found, initializing database...","timestamp":"2025-03-10T13:23:39.271Z"}
{"level":"info","message":"Test user created successfully","timestamp":"2025-03-10T13:23:39.514Z"}
{"level":"info","message":{"duration":278,"params":[],"query":"ALTER SEQUENCE users_id_seq RESTART WITH 1","rowCount":0},"timestamp":"2025-03-10T13:23:39.546Z"}
{"level":"info","message":{"duration":258,"params":[],"query":"-- First delete existing test data\r\nTRUNCATE users CASCADE","rowCount":0},"timestamp":"2025-03-10T13:23:39.806Z"}
{"level":"info","message":{"duration":766,"params":[],"query":"ALTER SEQUENCE registrations_id_seq RESTART WITH 1","rowCount":0},"timestamp":"2025-03-10T13:23:39.985Z"}
{"level":"info","message":{"duration":245,"params":[],"query":"-- Reset the sequence\r\nALTER SEQUENCE users_id_seq RESTART WITH 1","rowCount":0},"timestamp":"2025-03-10T13:23:40.052Z"}
{"level":"info","message":{"duration":250,"params":[],"query":"-- Insert registrations\r\nINSERT INTO registrations (\r\n    event_name,\r\n    event_code,\r\n    event_day,\r\n    event_time,\r\n    event_location,\r\n    team_size,\r\n    team_lead_name,\r\n    email,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    entry_fee,\r\n    payment_status,\r\n    status\r\n) VALUES \r\n    (\r\n        'Solo Singing',\r\n        'TALSUTRA',\r\n        'day 1',\r\n        'first half',\r\n        'New Seminar Hall',\r\n        1,\r\n        'Rahul Kumar',\r\n        'rahul@example.com',\r\n        '9876543210',\r\n        '9876543211',\r\n        'Engineering College of Excellence',\r\n        90.00,\r\n        'pending',\r\n        'pending'\r\n    )","rowCount":0},"timestamp":"2025-03-10T13:23:40.236Z"}
{"level":"info","message":{"duration":249,"params":[],"query":"INSERT INTO users (\r\n    name,\r\n    email,\r\n    event_title,\r\n    participant_names,\r\n    whatsapp_number,\r\n    alternate_phone,\r\n    college,\r\n    department,\r\n    year_of_study,\r\n    payment_status,\r\n    payment_amount,\r\n    payment_date,\r\n    transaction_id,\r\n    payment_method,\r\n    registration_type,\r\n    is_verified\r\n) VALUES \r\n    (\r\n        'John Doe',\r\n        'john@example.com',\r\n        'Robotics Workshop',\r\n        ARRAY['John Doe', 'Jane Smith'],\r\n        '9876543210',\r\n        '9876543211',\r\n        'MIT College',\r\n        'Computer Science',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        1500.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '2 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Alice Johnson',\r\n        'alice@example.com',\r\n        'AI Workshop',\r\n        ARRAY['Alice Johnson'],\r\n        '9876543212',\r\n        '9876543213',\r\n        'Stanford Tech',\r\n        'Artificial Intelligence',\r\n        'Final Year',\r\n        'PENDING',\r\n        2000.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'Bob Wilson',\r\n        'bob@example.com',\r\n        'Hackathon 2024',\r\n        ARRAY['Bob Wilson', 'Carol White', 'David Brown'],\r\n        '9876543214',\r\n        '9876543215',\r\n        'Tech Institute',\r\n        'Information Technology',\r\n        'Second Year',\r\n        'COMPLETED',\r\n        3000.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '1 day',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'Card',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Emma Davis',\r\n        'emma@example.com',\r\n        'Web Development',\r\n        ARRAY['Emma Davis'],\r\n        '9876543216',\r\n        '9876543217',\r\n        'Digital University',\r\n        'Web Technologies',\r\n        'First Year',\r\n        'FAILED',\r\n        1000.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '3 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'Michael Chen',\r\n        'michael@example.com',\r\n        'IoT Workshop',\r\n        ARRAY['Michael Chen', 'Sarah Lee'],\r\n        '9876543218',\r\n        '9876543219',\r\n        'IoT Institute',\r\n        'Electronics',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        2500.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '4 hours',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'NetBanking',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Sarah Williams',\r\n        'sarah@example.com',\r\n        'Blockchain Basics',\r\n        ARRAY['Sarah Williams'],\r\n        '9876543220',\r\n        '9876543221',\r\n        'Crypto College',\r\n        'Blockchain',\r\n        'Final Year',\r\n        'PENDING',\r\n        1800.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    ),\r\n    (\r\n        'James Brown',\r\n        'james@example.com',\r\n        'Machine Learning',\r\n        ARRAY['James Brown', 'Emily White'],\r\n        '9876543222',\r\n        '9876543223',\r\n        'AI Institute',\r\n        'Data Science',\r\n        'Second Year',\r\n        'COMPLETED',\r\n        2200.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '1 hour',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'UPI',\r\n        'TEAM',\r\n        true\r\n    ),\r\n    (\r\n        'Lisa Anderson',\r\n        'lisa@example.com',\r\n        'Cloud Computing',\r\n        ARRAY['Lisa Anderson'],\r\n        '9876543224',\r\n        '9876543225',\r\n        'Cloud Tech',\r\n        'Cloud Architecture',\r\n        'Third Year',\r\n        'COMPLETED',\r\n        1700.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '2 hours',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'Card',\r\n        'INDIVIDUAL',\r\n        true\r\n    ),\r\n    (\r\n        'Tom Miller',\r\n        'tom@example.com',\r\n        'Cybersecurity',\r\n        ARRAY['Tom Miller', 'Alex Johnson'],\r\n        '9876543226',\r\n        '9876543227',\r\n        'Security Institute',\r\n        'Information Security',\r\n        'Final Year',\r\n        'FAILED',\r\n        2800.00,\r\n        CURRENT_TIMESTAMP - INTERVAL '5 days',\r\n        'TXN' || floor(random() * 1000000)::text,\r\n        'NetBanking',\r\n        'TEAM',\r\n        false\r\n    ),\r\n    (\r\n        'Anna Martinez',\r\n        'anna@example.com',\r\n        'Mobile App Development',\r\n        ARRAY['Anna Martinez'],\r\n        '9876543228',\r\n        '9876543229',\r\n        'App Academy',\r\n        'Mobile Computing',\r\n        'Second Year',\r\n        'PENDING',\r\n        1900.00,\r\n        NULL,\r\n        NULL,\r\n        NULL,\r\n        'INDIVIDUAL',\r\n        false\r\n    )\r\nON CONFLICT (email) DO NOTHING","rowCount":0},"timestamp":"2025-03-10T13:23:40.303Z"}
{"level":"info","message":{"duration":248,"params":[],"query":"-- Then insert participants\r\nINSERT INTO participants (registration_id, name, is_team_lead) VALUES\r\n    (1, 'Rahul Kumar', true)","rowCount":0},"timestamp":"2025-03-10T13:23:40.485Z"}
{"level":"info","message":"Checking DATABASE_URL:","timestamp":"2025-03-13T17:49:47.436Z"}
{"level":"info","message":{"duration":781,"params":[],"query":"\n      CREATE TABLE IF NOT EXISTS users (\n        id SERIAL PRIMARY KEY,\n        email VARCHAR(255) UNIQUE NOT NULL,\n        name VARCHAR(255),\n        google_id VARCHAR(255),\n        profile_picture VARCHAR(1024),\n        password VARCHAR(255),\n        access_token TEXT,\n        refresh_token TEXT,\n        token_expires_at TIMESTAMP WITH TIME ZONE,\n        last_login_at TIMESTAMP WITH TIME ZONE,\n        is_admin BOOLEAN DEFAULT FALSE,\n        is_verified BOOLEAN DEFAULT FALSE,\n        created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n        updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n      );\n    ","rowCount":0},"timestamp":"2025-03-13T17:49:48.255Z"}
{"level":"info","message":"Database verification complete: Test user exists","timestamp":"2025-03-13T17:49:48.270Z"}
{"level":"info","message":{"duration":228,"params":[],"query":"\n            CREATE TABLE IF NOT EXISTS transactions (\n                id SERIAL PRIMARY KEY,\n                transaction_id VARCHAR(255) UNIQUE NOT NULL,\n                user_id INTEGER REFERENCES users(id),\n                amount DECIMAL(10,2) NOT NULL,\n                status VARCHAR(50) NOT NULL,\n                phonepe_transaction_id VARCHAR(255),\n                created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\n                updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\n            );\n        ","rowCount":0},"timestamp":"2025-03-13T17:49:48.486Z"}
{"level":"info","message":{"duration":306,"params":[],"query":"\n            INSERT INTO users (id, email, name) \n            VALUES (1, 'test@example.com', 'Test User')\n            ON CONFLICT (id) DO NOTHING;\n        ","rowCount":0},"timestamp":"2025-03-13T17:49:48.795Z"}
{"level":"info","message":"Database initialized successfully","timestamp":"2025-03-13T17:49:48.797Z"}
